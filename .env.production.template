# Echoes of Me - Production Environment Template
# This file contains cloud deployment configurations

# =============================================================================
# ENVIRONMENT CONFIGURATION
# =============================================================================
NODE_ENV=production
DEBUG=false

# =============================================================================
# SCALABLE DATABASE CONFIGURATION
# =============================================================================
# Choose one based on your cloud provider and budget:

# Option 1: Neon (PostgreSQL) - Serverless, pay-per-use
# DATABASE_URL=postgresql://user:pass@ep-xyz.us-east-1.aws.neon.tech/echosofme

# Option 2: Supabase (PostgreSQL) - Generous free tier
# DATABASE_URL=postgresql://postgres:pass@db.xyz.supabase.co:5432/postgres

# Option 3: PlanetScale (MySQL) - Serverless MySQL
# DATABASE_URL=mysql://user:pass@aws.connect.psdb.cloud/echosofme?sslaccept=strict

# Option 4: AWS RDS (managed PostgreSQL)
# DATABASE_URL=postgresql://user:pass@echosofme.cluster-xyz.us-east-1.rds.amazonaws.com:5432/echosofme

# Connection Pool Settings for Production
DB_POOL_MIN=5
DB_POOL_MAX=25
DB_POOL_IDLE_TIMEOUT=60000
DB_POOL_ACQUIRE_TIMEOUT=120000

# =============================================================================
# SCALABLE REDIS CONFIGURATION
# =============================================================================
# Choose based on your scaling needs:

# Option 1: Upstash Redis - Serverless, pay-per-request
# REDIS_URL=redis://user:pass@global-xyz.upstash.io:6379

# Option 2: Redis Cloud - Managed Redis with free tier
# REDIS_URL=redis://user:pass@redis-xyz.c1.us-east-1-2.ec2.cloud.redislabs.com:6379

# Option 3: AWS ElastiCache
# REDIS_URL=redis://echosofme.xyz.cache.amazonaws.com:6379

# Redis Configuration
REDIS_MAX_MEMORY=1gb
REDIS_EVICTION_POLICY=allkeys-lru

# =============================================================================
# CLOUD DEPLOYMENT CONFIGURATION
# =============================================================================
NEXTAUTH_URL=https://yourdomain.com
NEXTAUTH_SECRET=your-super-secure-production-secret-at-least-32-characters

# =============================================================================
# CLOUD STORAGE CONFIGURATION
# =============================================================================
# AWS S3 for voice files and models
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1
AWS_S3_BUCKET=echosofme-voices-prod
AWS_CLOUDFRONT_DOMAIN=d123xyz.cloudfront.net

# Alternative: Google Cloud Storage
# GOOGLE_CLOUD_PROJECT_ID=your-project-id
# GOOGLE_APPLICATION_CREDENTIALS=/app/service-account.json
# GCS_BUCKET=echosofme-voices-prod

# Alternative: Cloudflare R2 (S3-compatible, cheaper egress)
# R2_ACCESS_KEY_ID=your_r2_access_key
# R2_SECRET_ACCESS_KEY=your_r2_secret_key
# R2_BUCKET=echosofme-voices-prod
# R2_ENDPOINT=https://account.r2.cloudflarestorage.com

# =============================================================================
# AI TRAINING CLOUD CONFIGURATION
# =============================================================================
# Cloud GPU Training (when scaling beyond local RTX 5090)
CLOUD_GPU_PROVIDER=aws  # aws, gcp, modal, runpod
CLOUD_GPU_INSTANCE_TYPE=g4dn.xlarge  # AWS GPU instance

# Training Configuration
MAX_CONCURRENT_TRAINING_JOBS=5
TRAINING_QUEUE_PROVIDER=redis  # redis, aws-sqs, gcp-pubsub
AUTO_SCALE_TRAINING=true

# Model Storage
MODEL_STORAGE_PROVIDER=s3  # s3, gcs, azure-blob
MODEL_CDN_ENABLED=true

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
# Error Tracking
SENTRY_DSN=https://xyz@sentry.io/123456
SENTRY_ENVIRONMENT=production

# Application Performance Monitoring
DATADOG_API_KEY=your_datadog_api_key
DATADOG_SERVICE_NAME=echosofme

# Log Management
LOG_LEVEL=info
LOG_RETENTION_DAYS=30

# Health Checks
HEALTH_CHECK_INTERVAL=30000
UPTIME_MONITORING_URL=your_uptime_robot_webhook

# =============================================================================
# EMAIL & NOTIFICATIONS
# =============================================================================
# Transactional Email Service
EMAIL_PROVIDER=resend  # resend, sendgrid, ses

# Resend (recommended for simplicity)
RESEND_API_KEY=re_123xyz
FROM_EMAIL=noreply@yourdomain.com

# Alternative: SendGrid
# SENDGRID_API_KEY=SG.xyz
# SENDGRID_FROM_EMAIL=noreply@yourdomain.com

# Alternative: AWS SES
# AWS_SES_REGION=us-east-1
# AWS_SES_FROM_EMAIL=noreply@yourdomain.com

# =============================================================================
# SECURITY & COMPLIANCE
# =============================================================================
# Rate Limiting (more strict for production)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX_REQUESTS=50
RATE_LIMIT_WINDOW_MS=900000

# CORS Configuration
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# Security Headers
CSP_ENABLED=true
HSTS_ENABLED=true
X_FRAME_OPTIONS=DENIED

# Data Privacy
GDPR_COMPLIANCE=true
DATA_RETENTION_DAYS=2555  # 7 years for family legacy data
AUTO_DELETE_INACTIVE_ACCOUNTS=false

# =============================================================================
# SCALING CONFIGURATION
# =============================================================================
# Auto-scaling settings
AUTO_SCALING_ENABLED=true
MIN_INSTANCES=2
MAX_INSTANCES=10
SCALE_UP_THRESHOLD=70  # CPU percentage
SCALE_DOWN_THRESHOLD=30

# Load Balancing
LOAD_BALANCER_ENABLED=true
HEALTH_CHECK_PATH=/api/health

# CDN Configuration
CDN_ENABLED=true
CDN_PROVIDER=cloudflare  # cloudflare, aws-cloudfront, gcp-cdn
STATIC_ASSET_CDN=true

# =============================================================================
# BACKUP & DISASTER RECOVERY
# =============================================================================
# Database Backups
DB_BACKUP_ENABLED=true
DB_BACKUP_FREQUENCY=daily
DB_BACKUP_RETENTION=30

# Voice File Backups
VOICE_BACKUP_ENABLED=true
VOICE_BACKUP_RETENTION=90

# Cross-region Replication
CROSS_REGION_BACKUP=true
BACKUP_REGION=us-west-2

# =============================================================================
# PERFORMANCE OPTIMIZATION
# =============================================================================
# Caching Strategy
REDIS_CACHE_TTL=3600
API_CACHE_ENABLED=true
STATIC_CACHE_ENABLED=true

# Database Optimization
DB_READ_REPLICAS=1
DB_CONNECTION_POOLING=true
DB_QUERY_CACHING=true

# Content Delivery
IMAGE_OPTIMIZATION=true
COMPRESSION_ENABLED=true
MINIFICATION_ENABLED=true

# =============================================================================
# COST OPTIMIZATION
# =============================================================================
# Resource Management
IDLE_INSTANCE_SHUTDOWN=true
SPOT_INSTANCES_ENABLED=true  # For non-critical workloads
RESERVED_INSTANCES=false  # Enable after stable usage patterns

# Storage Optimization
STORAGE_LIFECYCLE_POLICY=true
COLD_STORAGE_AFTER_DAYS=90
ARCHIVE_AFTER_DAYS=365

# =============================================================================
# FEATURE FLAGS (Production)
# =============================================================================
FEATURE_VOICE_CLONING=true
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_REAL_TIME_TRAINING=true
FEATURE_GRIEF_SENSITIVITY=true
FEATURE_BETA_TESTING=false

# =============================================================================
# MIGRATION & DEPLOYMENT
# =============================================================================
# Deployment Strategy
DEPLOYMENT_STRATEGY=blue-green  # blue-green, rolling, canary
ROLLBACK_ENABLED=true
MIGRATION_ON_DEPLOY=true

# Database Migration
AUTO_MIGRATE=false  # Set to true only for staging
MIGRATION_TIMEOUT=300000

# =============================================================================
# COMPLIANCE & LEGAL
# =============================================================================
PRIVACY_POLICY_URL=https://yourdomain.com/privacy
TERMS_OF_SERVICE_URL=https://yourdomain.com/terms
COOKIE_CONSENT_REQUIRED=true
DATA_PROCESSING_AGREEMENT=required